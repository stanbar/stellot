(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{A0qh:function(e,t,n){e.exports={normal:"normal___YzYMc",title:"title___1eHup",header:"header___tDjU-",content:"content___3AoQj",logo:"logo___2ajOE",heading:"heading___31USQ"}},CQ3q:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return v}),n.d(t,"b",function(){return g});n("+L6B");var a=n("2/Rp"),r=n("fFZ8"),o=n.n(r),i=n("vOnD"),l=n("xhQn");function c(){var e=o()(["\n  background-color: #00000000;\n  color: ",";\n  width: 150px;\n  font-size: 16px;\n  padding: 10px 0;\n  &:disabled {\n    opacity: 0.5;\n    cursor: default;\n  }\n"]);return c=function(){return e},e}function s(){var e=o()(["\n  background-color: ",";\n  width: 150px;\n  font-size: 16px;\n  padding: 10px 0;\n  &:disabled {\n    opacity: 0.5;\n    cursor: default;\n  }\n"]);return s=function(){return e},e}function u(){var e=o()(["\n  background-color: ",";\n  color: ",";\n  border-color: ",";\n  float: right;\n  border: 1px solid;\n  width: 150px;\n  font-size: 16px;\n  padding: 10px 0;\n  &:disabled {\n    opacity: 0.5;\n    cursor: default;\n  }\n  &:hover {\n    color: ",";\n    background-color: #00000000;\n    border-color: ",";\n  }\n"]);return u=function(){return e},e}function d(){var e=o()(["\n  background-color: ",";\n  color: ",";\n  border-color: ",";\n  float: right;\n  width: 120px;\n  font-size: 16px;\n  padding: 10px 0;\n  &:disabled {\n    background: ",";\n    opacity: 0.6;\n    pointer-events: none;\n    cursor: default;\n  }\n  &:hover {\n    color: ",";\n    background-color: ",";\n  }\n"]);return d=function(){return e},e}function m(){var e=o()(["\n  background-color: ",";\n  border-radius: 5px;\n  border: 0;\n  color: ",";\n  cursor: pointer;\n  font-family: 'Clear Sans Bold','Nitti Grotesk','Museo Sans','Helvetica Neue',Verdana,Arial,sans-serif;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: initial;\n  padding: 14px 0 18px 0;\n  &:hover {\n    opacity: 0.8;\n  }\n  &:focus {\n    outline: 0;\n  }\n"]);return m=function(){return e},e}var p=Object(i["a"])(a["a"])(m(),l["a"],l["c"]),h=Object(i["a"])(p)(d(),e=>e.color?e.color:l["a"],l["c"],e=>e.color?e.color:l["a"],l["b"],l["c"],e=>e.color?e.color:l["a"]),f=Object(i["a"])(p)(u(),l["c"],e=>e.color?e.color:l["a"],e=>e.color?e.color:l["a"],e=>e.color?e.color:l["a"],e=>e.color?e.color:l["a"]),v=Object(i["a"])(p)(s(),e=>e.color?e.color:l["a"]),g=Object(i["a"])(p)(c(),e=>e.color?e.color:l["a"])},"c+yx":function(e,t,n){"use strict";(function(e){function a(e){return e&&0!==e.length&&e.trim()}function r(e){return e.charAt(0).toUpperCase()+e.substring(1)}function o(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error(e)}document.body.removeChild(t)}function i(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{console.log("Async: Copying to clipboard was successful!")},e=>{console.error("Async: Could not copy text: ",e)}):o(e)}n.d(t,"d",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return l});var l=e=>e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}).call(this,n("HDXh").Buffer)},dDcW:function(e,t,n){"use strict";var a=n("fFZ8"),r=n.n(a),o=n("q1tI"),i=n.n(o),l=n("vOnD"),c=n("hBab"),s=n("71ry"),u=n("c+yx"),d=n("wd/R"),m=n.n(d);function p(){var e=r()(["\n    font-size: .833rem;\n    line-height: 1.4;\n    font-weight: 500;\n    font-family: inherit;\n"]);return p=function(){return e},e}function h(){var e=r()(["\n      display: inline-block;\n      background: #e2f7f3;\n      color: #41ccb4;\n      padding: 5px 6px 5px 5px;\n      border-radius: 5px;\n      border: 0;\n      font-size: 100%;\n      vertical-align: baseline;\n      margin-right: 4px;\n  "]);return h=function(){return e},e}var f=l["a"].span(h()),v=l["a"].p(p()),g=e=>{var t=e.voting;return i.a.createElement("div",null,i.a.createElement("h1",{style:{marginTop:8,fontSize:"2rem"}},null===t||void 0===t?void 0:t.title),i.a.createElement("div",{style:{fontSize:12}},i.a.createElement(v,null,i.a.createElement(f,null,{[c["Visibility"].PUBLIC]:i.a.createElement(s["EyeOutlined"],null),[c["Visibility"].UNLISTED]:i.a.createElement(s["LinkOutlined"],null),[c["Visibility"].PRIVATE]:i.a.createElement(s["LockOutlined"],null)}[null===t||void 0===t?void 0:t.visibility],i.a.createElement("span",{style:{marginLeft:2}},Object(u["a"])(null===t||void 0===t?void 0:t.visibility))),i.a.createElement(f,null,{[c["Authorization"].OPEN]:i.a.createElement(s["NotificationOutlined"],null),[c["Authorization"].EMAILS]:i.a.createElement(s["MailOutlined"],null),[c["Authorization"].DOMAIN]:i.a.createElement(s["MailOutlined"],null),[c["Authorization"].CODE]:i.a.createElement(s["KeyOutlined"],null),[c["Authorization"].KEYBASE]:i.a.createElement(s["KeyOutlined"],null)}[null===t||void 0===t?void 0:t.authorization],i.a.createElement("span",{style:{marginLeft:2}},Object(u["a"])(null===t||void 0===t?void 0:t.authorization))),i.a.createElement("span",{style:{color:"#999"}},i.a.createElement("span",{style:{marginRight:4}},m()(null===t||void 0===t?void 0:t.startDate).format("ll")),"-",i.a.createElement("span",{style:{marginLeft:4}},m()(null===t||void 0===t?void 0:t.endDate).format("ll"))))))};t["a"]=g},vHNZ:function(e,t,n){"use strict";n.r(t);n("7Kak");var a=n("9yH6"),r=(n("/xke"),n("TeRw")),o=(n("y8nQ"),n("Vl3Y")),i=n("qIgq"),l=n.n(i),c=n("q1tI"),s=n.n(c),u=n("tbAx"),d=n("/MKj"),m=n("hBab"),p=n("CQ3q"),h=(n("MXD1"),n("CFYs")),f=(n("2qtc"),n("kLXV")),v=n("6gli"),g=n("3a4m"),E=n.n(g),b=n("QEzC");function y(e){var t=7;switch(e){case v["a"].INITIALIZING:return Math.round(1/t*100);case v["a"].CREATING_BLINDED_TRANSACTIONS:return Math.round(2/t*100);case v["a"].REQUESTED_CHALLENGE:return Math.round(3/t*100);case v["a"].PROVING_CHALLENGE:return Math.round(4/t*100);case v["a"].CALCULATING_SIGNATURE:return Math.round(5/t*100);case v["a"].CASTING_VOTE:return Math.round(6/t*100);case v["a"].DONE:return Math.round(7/t*100);default:case v["a"].UNDEFINED:return 0}}function x(e){switch(e){case v["a"].ERROR:return"exception";case v["a"].DONE:return"success";case v["a"].UNDEFINED:return"normal";default:return"active"}}var k=e=>{var t,n=e.dispatch,a=e.voting,r=e.status,o=e.errorMessage,i=a?null===(t=b["b"](a.id))||void 0===t?void 0:t.myTxHash:void 0;if(!a||!r)return s.a.createElement(s.a.Fragment,null);var l=r!==v["a"].UNDEFINED&&void 0!==r,c=r===v["a"].ERROR||r===v["a"].DONE,d=()=>{E.a.replace("/voting/".concat(a.slug,"/results")),Object(u["dispatchSetStatus"])(n,v["a"].UNDEFINED)},m=()=>{Object(u["dispatchSetStatus"])(n,v["a"].UNDEFINED),Object(u["dispatchSetAuthToken"])(n,a.id,void 0)};return s.a.createElement(f["a"],{visible:l,closable:!1,width:300,okText:"Show results",onOk:d,onCancel:()=>Object(u["dispatchSetStatus"])(n,v["a"].UNDEFINED),okButtonProps:{disabled:!c},cancelButtonProps:{disabled:!c},bodyStyle:{textAlign:"center"}},s.a.createElement(h["a"],{type:"circle",percent:y(r),status:x(r)}),o&&s.a.createElement("p",null,o," ",s.a.createElement("a",{onClick:m},"Sign in again")),s.a.createElement("p",null,r),i&&r===v["a"].DONE&&s.a.createElement("a",{href:"https://testnet.lumenscan.io/txns/".concat(i),target:"_blank",rel:"noreferrer noopener"},"Show transaction in explorer"))},O=Object(d["c"])(e=>{var t=e.voting;return{voting:t.voting,status:t.status,errorMessage:t.errorMessage}})(k),w=n("dDcW"),N=n("55Ip"),S=(n("+L6B"),n("2/Rp")),A=(n("5NDa"),n("5rEg")),I=(n("jCWc"),n("kPKH")),T=n("d6i3"),z=n.n(T),D=n("1l/V"),j=n.n(D);function _(e,t){return C.apply(this,arguments)}function C(){return C=j()(z.a.mark(function e(t,n){var a,r,o;return z.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://keybase.stellot.com","/auth/keybase/requestToken"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,requiredTeam:n})});case 2:if(a=e.sent,!a.ok){e.next=7;break}console.log("Successfully requested token"),e.next=12;break;case 7:return console.error("Failed to request token"),e.next=10,a.json();case 10:throw o=e.sent,new Error(null===o||void 0===o?void 0:null===(r=o.errors)||void 0===r?void 0:r.message);case 12:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function L(e){return q.apply(this,arguments)}function q(){return q=j()(z.a.mark(function e(t){var n,a,r;return z.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://emails.stellot.com","/auth/emails/requestToken"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 2:if(n=e.sent,!n.ok){e.next=7;break}console.log("Successfully requested token"),e.next=12;break;case 7:return console.error("Failed to request token"),e.next=10,n.json();case 10:throw r=e.sent,new Error(null===r||void 0===r?void 0:null===(a=r.errors)||void 0===a?void 0:a.message);case 12:case"end":return e.stop()}},e)})),q.apply(this,arguments)}var F=n("A0qh"),R=n.n(F),M=n("y0hu"),B=e=>{var t=e.dispatch,n=e.voting;return s.a.createElement(V,{dispatch:t,voting:n,authName:"Keybase",description:s.a.createElement("span",null,"We will send you message via ",s.a.createElement("a",{href:"https://keybase.io/stellotbot"},"stellotbot")," with authentication token."),logo:"https://keybase.io/images/icons/icon-keybase-logo-48@2x.png",inputPlaceholder:"Please enter your keybase username"})},P=e=>{var t=e.dispatch,n=e.voting;return s.a.createElement(V,{dispatch:t,voting:n,authName:"email",description:s.a.createElement("span",null,"We will send you email with authentication token."),logo:s.a.createElement(M["a"],null),inputPlaceholder:"Please enter your email address"})},V=e=>{var t=e.dispatch,n=e.voting,a=e.authName,r=e.description,i=e.logo,d=e.inputPlaceholder,p=o["a"].useForm(),h=l()(p,1),f=h[0],v=o["a"].useForm(),g=l()(v,1),E=g[0],b=Object(c["useState"])(!1),y=l()(b,2),x=y[0],k=y[1],O=Object(c["useState"])(void 0),w=l()(O,2),N=w[0],T=w[1],D=Object(c["useState"])(!1),C=l()(D,2),q=C[0],F=C[1],M=function(){var e=j()(z.a.mark(function e(t){var a;return z.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=t.username,e.prev=1,F(!0),e.t0=n.authorization,e.next=e.t0===m["Authorization"].KEYBASE?6:e.t0===m["Authorization"].EMAILS?9:12;break;case 6:return e.next=8,_(a,n.authorizationOptions.team);case 8:return e.abrupt("break",13);case 9:return e.next=11,L(a);case 11:return e.abrupt("break",13);case 12:throw new Error("unsupported authorization method");case 13:k(!0),T(void 0),e.next=21;break;case 17:e.prev=17,e.t1=e["catch"](1),console.error(e.t1),T(e.t1.message);case 21:return e.prev=21,F(!1),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[1,17,21,24]])}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=j()(z.a.mark(function e(a){return z.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:(null===a||void 0===a?void 0:a.token)&&Object(u["dispatchSetAuthToken"])(t,n.id,a.token);case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return s.a.createElement(I["a"],{className:R.a.content,style:{marginTop:"2em"},xs:{span:22,offset:1},sm:{span:20,offset:2},md:{span:16,offset:4},xl:{span:14,offset:5}},s.a.createElement("h1",null,"Voting requires ",a," authentication"),s.a.createElement("p",null,r),s.a.createElement(o["a"],{layout:"horizontal",form:f,name:"username_form",onFinish:M,style:{maxWidth:300,width:"100%"}},s.a.createElement(o["a"].Item,{name:"username",required:!0,style:{marginBottom:0}},s.a.createElement(A["a"],{placeholder:d,style:{borderRadius:3}})),s.a.createElement("span",{style:{color:"red"}},N),s.a.createElement(o["a"].Item,{style:{marginTop:8}},s.a.createElement(S["a"],{htmlType:"submit",color:"#33a0ff",loading:q,style:{width:"100%",textAlign:"left",borderRadius:3}},"string"===typeof i?s.a.createElement("img",{width:20,height:20,alt:"auth method logo",style:{marginRight:8,marginLeft:2},src:i}):i,"Send token"))),x&&s.a.createElement(o["a"],{layout:"horizontal",form:E,name:"token_form",onFinish:B,style:{marginTop:24,maxWidth:300,width:"100%"}},s.a.createElement(o["a"].Item,{required:!0,name:"token",style:{marginBottom:8}},s.a.createElement(A["a"],{placeholder:"Please enter token send to you in the message",width:300,height:200})),s.a.createElement(o["a"].Item,{noStyle:!0},s.a.createElement(S["a"],{htmlType:"submit",color:"#33a0ff",style:{width:"100%",textAlign:"left",paddingLeft:10,borderRadius:3}},"Submit"))))},U=e=>{var t,n=e.loading,i=e.authToken,d=e.match,h=e.dispatch,f=e.voting,v=o["a"].useForm(),g=l()(v,1),E=g[0],y=null===d||void 0===d?void 0:d.params["id"];Object(c["useEffect"])(()=>Object(u["dispatchFetchVoting"])(h,y),[y]);var x={display:"block",height:"50px",lineHeight:"50px",minWidth:"150px"},k=e=>{var t=e.optionCode;f?Object(u["dispatchPerformVote"])(h,f,t,i):r["a"].error({message:"Voting not found"})};if(n)return s.a.createElement("p",null,"Loading...");if(!f)return s.a.createElement("p",null,"Failed to load voting");var S=b["b"](f.id);return f.authorization!==m["Authorization"].KEYBASE||i?f.authorization!==m["Authorization"].EMAILS||i?s.a.createElement("div",null,s.a.createElement(w["a"],{voting:f}),s.a.createElement("h4",null,null===f||void 0===f?void 0:f.polls[0].question),s.a.createElement(o["a"],{layout:"vertical",name:"vote_form",onFinish:k,form:E},s.a.createElement(o["a"].Item,{name:"optionCode",rules:[{required:!0,message:"Please select your option!"}]},s.a.createElement(a["a"].Group,{buttonStyle:"solid",size:"large"},null===(t=f.polls[0].options)||void 0===t?void 0:t.map(e=>s.a.createElement(a["a"].Button,{style:x,key:e.code,value:e.code},e.name)))),s.a.createElement(o["a"].Item,{style:{marginBottom:0}},s.a.createElement(p["d"],{type:"primary",size:"large",disabled:!S,htmlType:"submit"},"Submit"))),s.a.createElement(N["Link"],{to:"/voting/".concat(y,"/results")},s.a.createElement(p["b"],null,"Show results")),s.a.createElement(O,null)):s.a.createElement(P,{dispatch:h,voting:f}):s.a.createElement(B,{dispatch:h,voting:f})};t["default"]=Object(d["c"])(e=>{var t=e.voting,n=e.loading;return{authToken:t.authToken,voting:t.voting,status:t.status,loading:n.effects["".concat(u["VOTING"],"/").concat(u["FETCH_VOTING"])]}})(U)},xhQn:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a="#ffffff",r="#979797",o="#6c72f9"}}]);